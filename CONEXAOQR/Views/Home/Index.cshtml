@model CONEXAOQR.Models.GestaoLeads

@{
    ViewBag.Title = "Dashboard";
    Layout = "~/Views/Shared/_LayoutTheme.cshtml";
}
   
    <div class="content">
        <div class="container-fluid">
            <div class="row">

                <div class="col-lg-6 col-md-10">
                    <div class="card shadow mb-4">
                        <div class="card-header card-header-success">
                            <h4 class="card-title">Funil de vendas</h4>
                            <p class="card-category">Processo de evolução </p>
                        </div>

                        <div class="card-body">
                            <div id="chartContainer" style="height: 280px; width: 100%;"></div>
                            <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
                            <script>
                                ListaPuntosDeRenta();

                                function ListaPuntosDeRenta() {
                                    $.ajax({
                                        type: "POST",
                                        url: "/Home/teste",
                                        data: "{}",
                                        dataType: "json",
                                        success: function (result) {
                                            GraficoTeste(result);
                                        },
                                        error: function (result) {
                                            alert("Error");
                                        }
                                    });
                                }

                                function GraficoTeste(result) {
                                    var num1 = 0;
                                    var num2 = 0;
                                    var num3 = 0;
                                    var num4 = 0;
                                    var num5 = 0;
                                    var num6 = 0;
                                    for (var i = 0; i < result.length; i++) {

                                        if (i == 0) {
                                            num1 = result[i].y;
                                        }
                                        if (i == 1) {
                                            num2 = result[i].y;
                                        }
                                        if (i == 2) {
                                            num3 = result[i].y;
                                        }
                                        if (i == 3) {
                                            num4 = result[i].y;
                                        }
                                        if (i == 4) {
                                            num5 = result[i].y;
                                        }
                                        if (i == 5) {
                                            num6 = result[i].y;
                                        }
                                    }


                                    var chart = new CanvasJS.Chart("chartContainer", {
                                        animationEnabled: true,

                                        data: [{
                                            type: "funnel",
                                            indexLabel: "{label} - {y}",
                                            toolTipContent: "<b>{label}</b>: {y} <b>({percentage}%)</b>",
                                            neckWidth: 15,
                                            neckHeight: 2,
                                            valueRepresents: "area",
                                            dataPoints: [
                                                { y: num1, label: "LEAD" },
                                                { y: num2, label: "ATENDIMENTO" },
                                                { y: num3, label: "AGENDAMENTO" },
                                                { y: num4, label: "VISITA" },
                                                { y: num5, label: "PROPOSTA" },
                                                { y: num6, label: "VENDA" }
                                            ]
                                        }]
                                    });
                                    calculatePercentage();
                                    chart.render();

                                    function calculatePercentage() {
                                        var dataPoint = chart.options.data[0].dataPoints;
                                        var total = dataPoint[0].y;
                                        for (var i = 0; i < dataPoint.length; i++) {
                                            if (i == 0) {
                                                chart.options.data[0].dataPoints[i].percentage = 100;
                                            } else {
                                                chart.options.data[0].dataPoints[i].percentage = ((dataPoint[i].y / total) * 100).toFixed(2);
                                            }
                                        }
                                    }

                                }
                            </script>
                        </div>
                    </div>
                </div>
                <!--fim primeiro gráfico-->
                <!--Inicio do 2° gráfico-->
                <div class="col-lg-6 col-md-12">
                    <!-- Approach -->
                    <div class="card shadow mb-4">
                        <div class="card-header card-header-danger">
                            <h4 class="card-title">Canais de Atração</h4>
                            <p class="card-category">Mídia de origem (atendimentos ativos)</p>
                        </div>
                        <div class="card-body">
                            <p>
                                <style>
                                    #chartdiv {
                                        width: 75%;
                                        height: 250px;
                                    }
                                </style>

                                <!-- Resources -->
                                <script src="https://cdn.amcharts.com/lib/4/core.js"></script>
                                <script src="https://cdn.amcharts.com/lib/4/charts.js"></script>
                                <script src="https://cdn.amcharts.com/lib/4/themes/material.js"></script>
                                <script src="https://cdn.amcharts.com/lib/4/themes/animated.js"></script>

                                <!-- Chart code -->
                                <script>
                                    am4core.ready(function () {

                                        // Themes begin
                                        am4core.useTheme(am4themes_material);
                                        am4core.useTheme(am4themes_animated);
                                        // Themes end

                                        // Create chart instance
                                        var chart = am4core.create("chartdiv", am4charts.PieChart);

                                        // Add data
                                        chart.data = [{
                                            "country": "Instagram",
                                            "litres": 501.9
                                        }, {
                                            "country": "Facebook",
                                            "litres": 301.9
                                        }, {
                                            "country": "Site Imobiliária",
                                            "litres": 201.1
                                        }, {
                                            "country": "Site MKTP",
                                            "litres": 165.8
                                        }, {
                                            "country": "Outros",
                                            "litres": 139.9

                                        }];

                                        // Add and configure Series
                                        var pieSeries = chart.series.push(new am4charts.PieSeries());
                                        pieSeries.dataFields.value = "litres";
                                        pieSeries.dataFields.category = "country";
                                        pieSeries.slices.template.stroke = am4core.color("#fff");
                                        pieSeries.slices.template.strokeWidth = 2;
                                        pieSeries.slices.template.strokeOpacity = 1;

                                        // This creates initial animation
                                        pieSeries.hiddenState.properties.opacity = 1;
                                        pieSeries.hiddenState.properties.endAngle = -90;
                                        pieSeries.hiddenState.properties.startAngle = -90;

                                    }); // end am4core.ready()
                                </script>

                                <!-- HTML -->
                                <div id="chartdiv"></div>
                        </div>
                    </div>
                </div>
            </div>




            <!-- <div class="row">

        <div class="col-lg-3 col-md-6 col-sm-6">
            <div class="card card-stats">
                <div class="card-header card-header-warning card-header-icon">
                    <div class="card-icon">
                        <i class="material-icons">content_copy</i>
                    </div>
                    <p class="card-category">Used Space</p>
                    <h3 class="card-title">
                        49/50
                        <small>GB</small>
                    </h3>
                </div>
                <div class="card-footer">
                    <div class="stats">
                        <i class="material-icons text-danger">warning</i>
                        <a href="javascript:;">Get More Space...</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-6">
            <div class="card card-stats">
                <div class="card-header card-header-success card-header-icon">
                    <div class="card-icon">
                        <i class="material-icons">store</i>
                    </div>
                    <p class="card-category">Revenue</p>
                    <h3 class="card-title">$34,245</h3>
                </div>
                <div class="card-footer">
                    <div class="stats">
                        <i class="material-icons">date_range</i> Last 24 Hours
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-6">
            <div class="card card-stats">
                <div class="card-header card-header-danger card-header-icon">
                    <div class="card-icon">
                        <i class="material-icons">info_outline</i>
                    </div>
                    <p class="card-category">Fixed Issues</p>
                    <h3 class="card-title">75</h3>
                </div>
                <div class="card-footer">
                    <div class="stats">
                        <i class="material-icons">local_offer</i> Tracked from Github
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-3 col-md-6 col-sm-6">
            <div class="card card-stats">
                <div class="card-header card-header-info card-header-icon">
                    <div class="card-icon">
                        <i class="fa fa-twitter"></i>
                    </div>
                    <p class="card-category">Followers</p>
                    <h3 class="card-title">+245</h3>
                </div>
                <div class="card-footer">
                    <div class="stats">
                        <i class="material-icons">update</i> Just Updated
                    </div>
                </div>
            </div>
        </div>
    </div>

           <div class="row">
               <div class="col-md-4">
                   <div class="card card-chart">
                       <div class="card-header card-header-success">
                           <div class="ct-chart" id="dailySalesChart"></div>
                       </div>
                       <div class="card-body">
                           <h4 class="card-title">Daily Sales</h4>
                           <p class="card-category">
                               <span class="text-success"><i class="fa fa-long-arrow-up"></i> 55% </span> increase in today sales.
                           </p>
                       </div>
                       <div class="card-footer">
                           <div class="stats">
                               <i class="material-icons">access_time</i> updated 4 minutes ago
                           </div>
                       </div>
                   </div>
               </div>
               <div class="col-md-4">
                   <div class="card card-chart">
                       <div class="card-header card-header-warning">
                           <div class="ct-chart" id="websiteViewsChart"></div>
                       </div>
                       <div class="card-body">
                           <h4 class="card-title">Email Subscriptions</h4>
                           <p class="card-category">Last Campaign Performance</p>
                       </div>
                       <div class="card-footer">
                           <div class="stats">
                               <i class="material-icons">access_time</i> campaign sent 2 days ago
                           </div>
                       </div>
                   </div>
               </div>
               <div class="col-md-4">
                   <div class="card card-chart">
                       <div class="card-header card-header-danger">
                           <div class="ct-chart" id="completedTasksChart"></div>
                       </div>
                       <div class="card-body">
                           <h4 class="card-title">Completed Tasks</h4>
                           <p class="card-category">Last Campaign Performance</p>
                       </div>
                       <div class="card-footer">
                           <div class="stats">
                               <i class="material-icons">access_time</i> campaign sent 2 days ago
                           </div>
                       </div>
                   </div>
               </div>
           </div>-->
            <div class="container-fluid">
                <div class="row">

                    <div class="col-lg-6 col-md-10">
                        <div class="card shadow mb-4">
                            <div class="card-header card-header-info">
                                <h4 class="card-title">Leads </h4>
                                <p class="card-category">Ativos / Inativos</p>
                            </div>

                            <div class="card-body">

                                <!-- Chart code -->
                                <script>
                                    am4core.ready(function () {

                                        // Themes begin
                                        am4core.useTheme(am4themes_animated);
                                        // Themes end

                                        // Create chart instance
                                        var chart = am4core.create("chartdiv2", am4charts.PieChart);

                                        // Add data
                                        chart.data = [{

                                            "country": "Ativos",
                                            "litres": 60
                                        }, {
                                            "country": "Inativos",
                                            "litres": 50
                                        }];

                                        // Add and configure Series
                                        var pieSeries = chart.series.push(new am4charts.PieSeries());
                                        pieSeries.dataFields.value = "litres";
                                        pieSeries.dataFields.category = "country";
                                        pieSeries.innerRadius = am4core.percent(50);
                                        pieSeries.ticks.template.disabled = true;
                                        pieSeries.labels.template.disabled = true;

                                        var rgm = new am4core.RadialGradientModifier();
                                        rgm.brightnesses.push(-0.8, -0.8, -0.5, 0, - 0.5);
                                        pieSeries.slices.template.fillModifier = rgm;
                                        pieSeries.slices.template.strokeModifier = rgm;
                                        pieSeries.slices.template.strokeOpacity = 0.4;
                                        pieSeries.slices.template.strokeWidth = 0;

                                        chart.legend = new am4charts.Legend();
                                        chart.legend.position = "right";

                                    }); // end am4core.ready()
                                </script>

                                <!-- HTML -->
                                <div id="chartdiv2"></div>

                            </div>
                        </div>
                    </div>
                    <!--Inicio do terceiro Gráfico-->
                    <div class="col-lg-6 col-md-10">
                        <div class="card shadow mb-4">
                            <div class="card-header card-header-info">
                                <h4 class="card-title">Imóveis X Etapas do Funil</h4>
                                <p class="card-category">Total</p>
                            </div>

                            <div class="card-body">
                                <div id="chartContainer2"></div>

                                <script>
                                    am4core.ready(function () {

                                        // Themes begin
                                        am4core.useTheme(am4themes_material);
                                        am4core.useTheme(am4themes_animated);
                                        // Themes end

                                        var chart = am4core.create("chartdiv22", am4charts.SlicedChart);
                                        chart.hiddenState.properties.opacity = 0; // this makes initial fade in effect

                                        chart.data = [{
                                            "name": "LEAD R$ 8.950,000",
                                            "value": 8950
                                        }, {
                                            "name": "ATENDIMENTO R$ 5.950,000",
                                            "value": 5950
                                        }, {
                                            "name": "AGENDAMENTO R$ 950,000",
                                            "value": 15560
                                        }, {
                                            "name": "VISITA R$ 2.120,00",
                                            "value": 2120
                                        }, {
                                            "name": "PROPOSTA R$ 1.950,000",
                                            "value": 1950
                                        }, {
                                            "name": "VENDA R$ 350,00",
                                            "value": 350
                                        }];

                                        var series = chart.series.push(new am4charts.FunnelSeries());
                                        series.colors.step = 2;
                                        series.dataFields.value = "value";
                                        series.dataFields.category = "name";
                                        series.alignLabels = true;

                                        series.labelsContainer.paddingLeft = 15;
                                        series.labelsContainer.width = 200;

                                        //series.orientation = "horizontal";
                                        //series.bottomRatio = 1;

                                        chart.legend = new am4charts.Legend();
                                        chart.legend.position = "left";
                                        chart.legend.valign = "bottom";
                                        chart.legend.margin(5, 5, 20, 5);

                                    }); // end am4core.ready()
                                </script>

                                <!-- HTML -->
                                <div id="chartdiv22"></div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br />
            <br />




            <div class="row">
                <div class="col-lg-6 col-md-12">
                    <!-- <div class="card">
                    <div class="card-header card-header-tabs card-header-primary">
                        <div class="nav-tabs-navigation">
                            <div class="nav-tabs-wrapper">
                                <span class="nav-tabs-title">Tasks:</span>
                                <ul class="nav nav-tabs" data-tabs="tabs">
                                    <li class="nav-item">
                                        <a class="nav-link active" href="#profile" data-toggle="tab">
                                            <i class="material-icons">bug_report</i> Bugs
                                            <div class="ripple-container"></div>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="#messages" data-toggle="tab">
                                            <i class="material-icons">code</i> Website
                                            <div class="ripple-container"></div>
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="#settings" data-toggle="tab">
                                            <i class="material-icons">cloud</i> Server
                                            <div class="ripple-container"></div>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="tab-content">
                            <div class="tab-pane active" id="profile">
                                <table class="table">
                                    <tbody>
                                        <tr>
                                            <td>
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" value="" checked>
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </td>
                                            <td>Sign contract for "What are conference organizers afraid of?"</td>
                                            <td class="td-actions text-right">
                                                <button type="button" rel="tooltip" title="Edit Task" class="btn btn-primary btn-link btn-sm">
                                                    <i class="material-icons">edit</i>
                                                </button>
                                                <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-link btn-sm">
                                                    <i class="material-icons">close</i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" value="">
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </td>
                                            <td>Lines From Great Russian Literature? Or E-mails From My Boss?</td>
                                            <td class="td-actions text-right">
                                                <button type="button" rel="tooltip" title="Edit Task" class="btn btn-primary btn-link btn-sm">
                                                    <i class="material-icons">edit</i>
                                                </button>
                                                <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-link btn-sm">
                                                    <i class="material-icons">close</i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" value="">
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                Flooded: One year later, assessing what was lost and what was found when a ravaging rain swept through metro Detroit
                                            </td>
                                            <td class="td-actions text-right">
                                                <button type="button" rel="tooltip" title="Edit Task" class="btn btn-primary btn-link btn-sm">
                                                    <i class="material-icons">edit</i>
                                                </button>
                                                <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-link btn-sm">
                                                    <i class="material-icons">close</i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" value="" checked>
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </td>
                                            <td>Create 4 Invisible User Experiences you Never Knew About</td>
                                            <td class="td-actions text-right">
                                                <button type="button" rel="tooltip" title="Edit Task" class="btn btn-primary btn-link btn-sm">
                                                    <i class="material-icons">edit</i>
                                                </button>
                                                <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-link btn-sm">
                                                    <i class="material-icons">close</i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="tab-pane" id="messages">
                                <table class="table">
                                    <tbody>
                                        <tr>
                                            <td>
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" value="" checked>
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                Flooded: One year later, assessing what was lost and what was found when a ravaging rain swept through metro Detroit
                                            </td>
                                            <td class="td-actions text-right">
                                                <button type="button" rel="tooltip" title="Edit Task" class="btn btn-primary btn-link btn-sm">
                                                    <i class="material-icons">edit</i>
                                                </button>
                                                <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-link btn-sm">
                                                    <i class="material-icons">close</i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" value="">
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </td>
                                            <td>Sign contract for "What are conference organizers afraid of?"</td>
                                            <td class="td-actions text-right">
                                                <button type="button" rel="tooltip" title="Edit Task" class="btn btn-primary btn-link btn-sm">
                                                    <i class="material-icons">edit</i>
                                                </button>
                                                <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-link btn-sm">
                                                    <i class="material-icons">close</i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="tab-pane" id="settings">
                                <table class="table">
                                    <tbody>
                                        <tr>
                                            <td>
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" value="">
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </td>
                                            <td>Lines From Great Russian Literature? Or E-mails From My Boss?</td>
                                            <td class="td-actions text-right">
                                                <button type="button" rel="tooltip" title="Edit Task" class="btn btn-primary btn-link btn-sm">
                                                    <i class="material-icons">edit</i>
                                                </button>
                                                <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-link btn-sm">
                                                    <i class="material-icons">close</i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" value="" checked>
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </td>
                                            <td>
                                                Flooded: One year later, assessing what was lost and what was found when a ravaging rain swept through metro Detroit
                                            </td>
                                            <td class="td-actions text-right">
                                                <button type="button" rel="tooltip" title="Edit Task" class="btn btn-primary btn-link btn-sm">
                                                    <i class="material-icons">edit</i>
                                                </button>
                                                <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-link btn-sm">
                                                    <i class="material-icons">close</i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div class="form-check">
                                                    <label class="form-check-label">
                                                        <input class="form-check-input" type="checkbox" value="" checked>
                                                        <span class="form-check-sign">
                                                            <span class="check"></span>
                                                        </span>
                                                    </label>
                                                </div>
                                            </td>
                                            <td>Sign contract for "What are conference organizers afraid of?"</td>
                                            <td class="td-actions text-right">
                                                <button type="button" rel="tooltip" title="Edit Task" class="btn btn-primary btn-link btn-sm">
                                                    <i class="material-icons">edit</i>
                                                </button>
                                                <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-link btn-sm">
                                                    <i class="material-icons">close</i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>-->
                    <div class="card">
                        <div class="card-header card-header-rose">
                            <h4 class="card-title">Metas de Avanço Corretores</h4>
                            <p class="card-category">Mês atual</p>
                        </div>
                        <div class="card-body table-responsive">
                            <table class="table table-hover">
                                <thead class="text-warning">
                                <th>Name</th>
                                <th>Meta</th>
                                <th>Valor atingido</th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Natália mendes</td>
                                        <td>R$ 1.580,000</td>
                                        <td>R$ 480.00</td>
                                    </tr>
                                    <tr>
                                        <td>Jaimes Cardoso</td>
                                        <td>R$ 2.500,00</td>
                                        <td>R$ 250.00</td>
                                    </tr>
                                    <tr>
                                        <td>Hugo Rodriguez</td>
                                        <td>R$ 1.800,00</td>
                                        <td>R$ 1.010,00</td>
                                    </tr>
                                    <tr>
                                        <td>Maria </td>
                                        <td>R$ 3.100,00</td>
                                        <td>R$ 650.80</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-md-12">
                    <div class="card">
                        <div class="card-header card-header-warning">
                            <h4 class="card-title">Visitas </h4>
                            <p class="card-category">agendadas</p>
                        </div>
                        <div class="card-body table-responsive">
                            <table class="table table-hover">
                                <thead class="text-warning">
                                <th>Name</th>
                                <th>Valor do Imóvel</th>
                                <th>Corretor</th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>Dakota Rice</td>
                                        <td>R$ 480.00</td>
                                        <td>Natália mendes</td>
                                    </tr>
                                    <tr>
                                        <td>João José</td>
                                        <td>R$ 250.00</td>
                                        <td>Jaimes Cardoso</td>
                                    </tr>
                                    <tr>
                                        <td>Hugo Rodriguez</td>
                                        <td>R$ 340.00</td>
                                        <td>Maria</td>
                                    </tr>
                                    <tr>
                                        <td>Letícia Araújo</td>
                                        <td>R$ 650.80</td>
                                        <td>Jaimes Cardoso</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>



            </div>
        </div>
                        </div>


